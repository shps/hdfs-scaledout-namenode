<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"   
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      >



    <ui:composition template="layout.xhtml">

        <ui:define name="title">
            KTHFS Dashboard - Hosts
        </ui:define>


        <ui:define name="scripts">
            <script language='javascript'>
                function startProgressBars(){
                    
                    pbMemory.setValue('#{hostController.memoryUsed}');
                    //                    pbMemory.start();
                    pbSwap.setValue('#{hostController.swapUsed}');
                    

                    //                    pbdiskboot.setValue('50');

                    for(var i=0; i!=items.length; i++) {
                        //                        alert(items[i]);
                        //                        document.getElementByName(items[i]).setAttribute('style', 'width: 90%')
                        item[i] = ('40');
                    }
                        
                    
                }
            </script>

            <script>
                var items = new Array();
                window.onload=startProgressBars ;
            </script>
        </ui:define>


        <ui:define name="content">

            <!--Navigation Bar - Begin -->
            <h:form styleClass="styleNav">
                <p:panelGrid>  
                    <p:row>  
                        <p:column>
                            <p:commandLink id="hosts" action="hosts" ajax="false">  
                                <h:outputText value="Hosts" />
                            </p:commandLink> 
                            <h:outputText value=" &raquo; Host #{hostController.host.name}"/>
                        </p:column>
                    </p:row>
                </p:panelGrid>
            </h:form>
            <!--Navigation Bar - End-->

            <h3>Host <h:outputText value="#{hostController.host.name}"/></h3>

            <p:panel header="Host Status Details" footer="Sample Footer...">

                <h:form >
                    <p:dataTable id="host" var="host" value="#{hostController.host}">
                        <p:column headerText="Name" style="width: 33%"><h:outputText value="#{host.name}"/></p:column>  
                        <p:column headerText="IP" style="width: 33%"><h:outputText value="?"/></p:column>  
                        <p:column headerText="Rack"><h:outputText value="?"/></p:column>  
                    </p:dataTable> 

                    <p:dataTable id="hostinfo" var="host" value="#{hostController}">
                        <p:column headerText="Health"><h:outputText value="?"/></p:column>  
                        <p:column headerText="Last Update"><h:outputText value="#{host.lastUpdate} s"/></p:column>  
                        <p:column headerText="Number of Cores"><h:outputText value="#{host.numberOfCpu}"/></p:column>  
                        <p:column headerText="Load"><h:outputText value="#{host.load}"/></p:column>  
                        <p:column headerText="Physical Memory"><p:progressBar id="pbmemory" widgetVar="pbMemory" labelTemplate="{value}%" ajax="false" value="#{host.memoryUsed}"/></p:column>
                        <p:column headerText="Swap Space"><p:progressBar id="pbswap" widgetVar="pbSwap" labelTemplate="{value}%" ajax="false" value="#{host.swapUsed}"/></p:column>
                    </p:dataTable> 
                </h:form>

            </p:panel> 

            <p:spacer width="1" height="8" />

            <p:panel header="File Systems">  
                <h:outputText value=""/>
                <p:dataTable id="df" var="df" value="#{hostController.df}">
                    <p:column headerText="Disk"><h:outputText value="#{df.disk}"/></p:column>  
                    <p:column headerText="Size"><h:outputText value="#{df.total}"/> </p:column> 
                    <p:column headerText="Used"><h:outputText value="#{df.used}"/> </p:column> 
                    <p:column headerText="Free"><h:outputText value="#{df.free}"/> </p:column> 
                    <p:column headerText="Usage (%)"><h:outputText value="#{df.usedPercent} %"/> </p:column> 
                </p:dataTable>  
            </p:panel> 

        </ui:define>

    </ui:composition>

</html>

