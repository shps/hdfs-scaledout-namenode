#!/usr/bin/expect

spawn knife configure -i 

# Where should I put the config file? [/var/lib/chef/.chef/knife.rb]         
# Please enter the chef server URL: [http://precise64:4000] http://localhost:4000
# Please enter a clientname for the new client: [vagrant] 
# Please enter the existing admin clientname: [chef-webui] 
# Please enter the location of the existing admin client's private key: [/etc/chef/webui.pem] 
# Please enter the validation clientname: [chef-validator] 
# Please enter the location of the validation key: [/etc/chef/validation.pem] 
# Please enter the path to a chef repository (or leave blank): 

expect "Where should I put the config file?"
send "\n"

expect "Please enter the chef server URL:"
send "http://<%= node[:chef][:server_url] %>\n"

expect "Please enter a clientname for the new client:"
send "\n"

expect "Please enter the existing admin clientname:"
send "\n"

expect "Please enter the location of the existing admin client's private key:"
send "\n"

expect "Please enter the validation clientname:"
send "\n"

expect "Please enter the location of the validation key:"
send "\n"

expect "Please enter the path to a chef repository (or leave blank):"
send "\n"

expect eof
