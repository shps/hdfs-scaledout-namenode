#!/usr/bin/expect

# cd <%= node[:chef][:base_dir] %>
cd /home/<%= node[:chef][:user] %>

spawn /opt/vagrant_ruby/bin/knife configure -i 

# Where should I put the config file? [/var/lib/chef/.chef/knife.rb]         
# Please enter the chef server URL: [http://precise64:4000] http://localhost:4000
# Please enter a clientname for the new client: [vagrant] 
# Please enter the existing admin clientname: [chef-webui] 
# Please enter the location of the existing admin client's private key: [/etc/chef/webui.pem] 
# Please enter the validation clientname: [chef-validator] 
# Please enter the location of the validation key: [/etc/chef/validation.pem] 
# Please enter the path to a chef repository (or leave blank): 

expect "Where should I put the config file? [/var/lib/chef/.chef/knife.rb]"
send "\n"
expect "Please enter a clientname for the new client: [vagrant]"
send "\n"
expect "Please enter the existing admin clientname: [chef-webui]"
send "\n"
expect "Please enter the location of the existing admin client's private key: [/etc/chef/webui.pem]"
send "\n"
expect "Please enter the validation clientname: [chef-validator]"
send "\n"
expect "Please enter the location of the validation key: [/etc/chef/validation.pem]"
send "\n"
expect "Please enter the path to a chef repository (or leave blank):"
send "\n"

# expect "Please enter the chef server URL"
# send "\n"

# expect "Please enter a clientname for the new client:"
# send "kthfs\n"

# expect "Please enter the existing admin clientname:"
# send "\n"

# expect "Please enter the location of the existing admin client's private key:"
# send "\.chef\/webui.pem\n"

# expect "Please enter the validation clientname:"
# send "\n"

# expect "Please enter the location of the validation key:"
# send "\.chef\/validation.pem\n"

# expect "Please enter the path to a chef repository (or leave blank):"
# send "\n"

expect eof
