#!/bin/sh

if [ "$1" = "-h" ] ; then
   echo "Usage: mysql-client-1.sh [-s] [database_name]"
   echo "[-S] connects the mysql client using a socket, instead of tcp protocol."
   echo "[-e] executes and SQL statement and the client then exits."
   exit 0
fi
SOCKET=0
if [ "$1" = "-S" ] ; then
    shift
    SOCKET=1
fi

EXECUTE_SQL=0
if [ "$1" = "-e" ] ; then
    shift
    EXECUTE_SQL=1
fi

if [ $SOCKET -eq 1 ] ; then
    MYSQL_SOCKET=`<%= @ndb_dir %>/scripts/get-mysql-socket.sh`
   if [ $EXECUTE_SQL -eq 1 ] ; then
    <%= @mysql_dir %>/bin/mysql -u root -S $MYSQL_SOCKET -e "$@"
   else
    <%= @mysql_dir %>/bin/mysql -u root -S $MYSQL_SOCKET 
   fi
else
    PORT=`<%= @ndb_dir %>/scripts/get-mysql-port.sh`
    <%= @mysql_dir %>/bin/mysql -u root --protocol=tcp -h cloud11 --port=$PORT $EXECUTE_SQL
fi


